class PortfolioApp{constructor(){this.currentTheme=localStorage.getItem("theme")||"dark",this.currentLang=localStorage.getItem("language")||"vi",this.isNavOpen=!1,this.isFabOpen=!1,this.lastScrollY=0,this.config={},this.translations={},this.projects=[],this.skills=[],this.certificates=[],this.modals={},this.init()}async init(){try{await this.loadData(),this.initializeTheme(),this.initializeLanguage(),this.initializeNavigation(),this.initializeModals(),this.initializeScrollEffects(),this.initializeProjects(),this.initializeSkills(),this.initializeFAB(),this.initializeAcademicProgress(),this.initializeVisitorCounter(),this.hideLoadingScreen(),console.log("‚úÖ Portfolio Initialized Successfully!")}catch(t){console.error("‚ùå Failed to initialize portfolio:",t),this.hideLoadingScreen()}}async loadData(){try{console.log("üîÑ Loading JSON data...");const[t,e,i,s,n]=await Promise.all([fetch("data/config.json").then(t=>{if(console.log("Config response:",t.status),!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}),fetch("data/translations.json").then(t=>{if(console.log("Translations response:",t.status),!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}),fetch("data/projects.json").then(t=>{if(console.log("Projects response:",t.status),!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}),fetch("data/skills.json").then(t=>{if(console.log("Skills response:",t.status),!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}),fetch("data/certificates.json").then(t=>{if(console.log("Certificates response:",t.status),!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()})]);this.config=t,this.translations=e,this.projects=i.projects||[],this.skills=s.categories||[],this.certificates=n.certificates||[],console.log("‚úÖ JSON Data loaded:",{config:Object.keys(this.config).length,translations:Object.keys(this.translations).length,projects:this.projects.length,skills:this.skills.length,certificates:this.certificates.length})}catch(t){throw console.error("‚ùå Fatal error loading data:",t),t}}initializeTheme(){const t=document.getElementById("themeToggle");t&&t.addEventListener("click",()=>this.toggleTheme()),this.applyTheme()}toggleTheme(){this.currentTheme="dark"===this.currentTheme?"light":"dark",localStorage.setItem("theme",this.currentTheme),this.applyTheme()}applyTheme(){document.body.setAttribute("data-theme",this.currentTheme);const t=document.querySelector("#themeToggle i");t&&(t.className="dark"===this.currentTheme?"fas fa-sun":"fas fa-moon")}initializeLanguage(){const t=document.getElementById("langToggle");t&&t.addEventListener("click",()=>this.toggleLanguage()),this.applyLanguage()}toggleLanguage(){this.currentLang="vi"===this.currentLang?"en":"vi",localStorage.setItem("language",this.currentLang),this.applyLanguage()}applyLanguage(){document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");this.translations[this.currentLang]&&this.translations[this.currentLang][e]&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName?t.placeholder=this.translations[this.currentLang][e]:t.textContent=this.translations[this.currentLang][e])});const t=document.getElementById("langToggle");t&&(t.textContent=this.currentLang.toUpperCase())}initializeNavigation(){const t=document.getElementById("navToggle"),e=document.getElementById("navMenu"),i=document.querySelectorAll(".nav-link");t&&e&&t.addEventListener("click",()=>this.toggleNavigation()),i.forEach(t=>{t.addEventListener("click",()=>{this.closeNavigation()})}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=document.querySelector(t.getAttribute("href"));i&&i.scrollIntoView({behavior:"smooth"})})})}toggleNavigation(){this.isNavOpen=!this.isNavOpen;const t=document.getElementById("navMenu"),e=document.getElementById("navToggle");t&&e&&(t.classList.toggle("active",this.isNavOpen),e.classList.toggle("active",this.isNavOpen))}closeNavigation(){this.isNavOpen=!1;const t=document.getElementById("navMenu"),e=document.getElementById("navToggle");t&&e&&(t.classList.remove("active"),e.classList.remove("active"))}initializeScrollEffects(){let t=!1;window.addEventListener("scroll",()=>{t||(requestAnimationFrame(()=>{this.handleScroll(),t=!1}),t=!0)})}handleScroll(){const t=window.scrollY,e=document.getElementById("navbar");e&&(t>this.lastScrollY&&t>100?e.style.transform="translateY(-100%)":e.style.transform="translateY(0)"),this.lastScrollY=t,this.updateActiveNavLink()}updateActiveNavLink(){const t=document.querySelectorAll("section[id]"),e=document.querySelectorAll(".nav-link");let i="";t.forEach(t=>{const e=t.offsetTop;t.clientHeight;scrollY>=e-200&&(i=t.getAttribute("id"))}),e.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===`#${i}`&&t.classList.add("active")})}initializeProjects(){this.renderFeaturedProjects(),this.initializeProjectModals()}renderFeaturedProjects(){const t=document.querySelector(".projects-grid");if(!t)return void console.error("‚ùå Projects container not found");if(!this.projects.length)return console.error("‚ùå No projects data loaded"),void(t.innerHTML='<p style="color: red;">No projects data loaded!</p>');const e=this.projects.filter(t=>t.featured);console.log("üéØ Featured projects:",e.length),t.innerHTML=e.map(t=>`\n            <div class="project-card" data-project="${t.id}">\n                <div class="project-image">\n                    <div class="project-tech-stack">\n                        ${t.technologies.map(t=>`<span class="tech-badge">${t}</span>`).join("")}\n                    </div>\n                    <div class="project-icon"><i class="${t.image}"></i></div>\n                </div>\n                <div class="project-content">\n                    <h3 class="project-title">${t.title}</h3>\n                    <p class="project-description">${t.description}</p>\n                    <div class="project-actions">\n                        <button class="btn-outline" onclick="app.openProjectModal('${t.id}')">\n                            <i class="fas fa-eye"></i> View Details\n                        </button>\n                        ${t.github?`<a href="${t.github}" class="btn-icon" target="_blank"><i class="fab fa-github"></i></a>`:""}\n                    </div>\n                </div>\n            </div>\n        `).join(""),console.log("‚úÖ Projects rendered successfully")}initializeProjectModals(){}openProjectModal(t){const e=this.projects.find(e=>e.id===t);if(!e)return;const i=document.getElementById("projectModal"),s=document.getElementById("projectModalTitle"),n=document.getElementById("projectDetailContent");i&&s&&n&&(s.textContent=e.title,n.innerHTML=`\n                <div class="project-detail">\n                    <h4>Description</h4>\n                    <p>${e.description}</p>\n                    \n                    <h4>Technologies</h4>\n                    <div class="tech-stack">\n                        ${e.technologies.map(t=>`<span class="tech-badge">${t}</span>`).join("")}\n                    </div>\n                    \n                    <h4>Category</h4>\n                    <p>${e.category}</p>\n                    \n                    <div class="project-links">\n                        ${e.github?`<a href="${e.github}" target="_blank" class="btn-primary"><i class="fab fa-github"></i> View Code</a>`:""}\n                        ${e.demo?`<a href="${e.demo}" target="_blank" class="btn-outline"><i class="fas fa-external-link-alt"></i> Live Demo</a>`:""}\n                    </div>\n                </div>\n            `,this.showModal(i))}initializeSkills(){this.renderSkills()}renderSkills(){const t=document.querySelector(".skills-container");if(t){if(!this.skills.length)return console.error("‚ùå No skills data loaded"),void(t.innerHTML='<p style="color: red;">No skills data loaded!</p>');console.log("üéØ Skills categories:",this.skills.length),t.innerHTML=this.skills.map(t=>`\n            <div class="skill-category">\n                <h3 class="category-title">${t.name[this.currentLang]||t.name.en}</h3>\n                <div class="skills-grid">\n                    ${t.skills.map(t=>`\n                        <div class="skill-item">\n                            <img src="${t.icon}" alt="${t.name}" loading="lazy">\n                            <span>${t.name}</span>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        `).join(""),console.log("‚úÖ Skills rendered successfully")}else console.error("‚ùå Skills container not found")}initializeModals(){const t=document.getElementById("modalOverlay"),e=document.querySelectorAll(".modal-close");t&&t.addEventListener("click",e=>{e.target===t&&this.hideAllModals()}),e.forEach(t=>{t.addEventListener("click",()=>{this.hideAllModals()})})}showModal(t){const e=document.getElementById("modalOverlay");e&&t&&(e.classList.add("active"),t.classList.add("active"),document.body.style.overflow="hidden")}hideAllModals(){const t=document.getElementById("modalOverlay");document.querySelectorAll(".modal").forEach(t=>{t.classList.add("closing"),setTimeout(()=>{t.classList.remove("active","closing")},300)}),t&&setTimeout(()=>{t.classList.remove("active"),document.body.style.overflow=""},300)}initializeFAB(){const t=document.getElementById("mainFab"),e=document.getElementById("backToTop"),i=document.getElementById("viewCV"),s=document.getElementById("shareProfile");t&&t.addEventListener("click",()=>this.toggleFAB()),e&&e.addEventListener("click",()=>this.scrollToTop()),i&&i.addEventListener("click",()=>this.openCVModal()),s&&s.addEventListener("click",()=>this.shareProfile())}toggleFAB(){this.isFabOpen=!this.isFabOpen;const t=document.getElementById("fabMenu"),e=document.getElementById("mainFab");t&&e&&(t.classList.toggle("active",this.isFabOpen),e.classList.toggle("active",this.isFabOpen))}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"}),this.toggleFAB()}openCVModal(){const t=document.getElementById("cvModal");t&&this.showModal(t),this.toggleFAB()}shareProfile(){navigator.share?navigator.share({title:"Trinh Hoang Tu - Portfolio",text:"Check out my portfolio!",url:window.location.href}):navigator.clipboard.writeText(window.location.href),this.toggleFAB()}initializeAcademicProgress(){if(!this.config.academic)return;const t=this.config.academic,e=t.creditsCompleted/t.totalCredits*100,i=document.getElementById("progressFill"),s=document.getElementById("progressPercentage");i&&(i.style.width=`${e}%`),s&&(s.textContent=`${e.toFixed(1)}%`),this.updateStats()}updateStats(){const t=document.getElementById("creditsCompleted"),e=document.getElementById("projectsBuilt"),i=document.getElementById("technologiesUsed");t&&this.config.academic?.creditsCompleted&&(t.textContent=`${this.config.academic.creditsCompleted}+`),e&&this.config.stats?.projectsBuilt&&(e.textContent=`${this.config.stats.projectsBuilt}+`),i&&this.config.stats?.technologiesUsed&&(i.textContent=`${this.config.stats.technologiesUsed}+`)}initializeVisitorCounter(){const t=this.config.site?.visitorCounterNamespace||"portfolio-visitors";let e=parseInt(localStorage.getItem(t)||"0");e++,localStorage.setItem(t,e.toString()),console.log(`Visitor count: ${e}`)}hideLoadingScreen(){const t=document.getElementById("loadingScreen");t&&(t.style.opacity="0",setTimeout(()=>{t.style.display="none"},500))}}let app;document.addEventListener("DOMContentLoaded",()=>{app=new PortfolioApp}),window.app=app;